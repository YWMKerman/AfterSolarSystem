@Kopernicus:FOR[AfterSolarSystem]
{
	useOnDemand = True
	Body
	{
		name = Europa
		finalizeOrbit = False
		flightGlobalsIndex = 14
        randomMainMenuBody = False
		identifier = SolarSystem/Europa
		cacheFile = AfterSolarSystem/ASSKopernicus/Cache/Europa.bin
		Template
		{
			name = Laythe	
			removeAllPQSMods = True
			//removePQSMods = PQSMod_VertexHeightMap, PQSMod_VertexSimplexHeight, PQSMod_VertexHeightNoiseVertHeightCurve2, PQSMod_VertexHeightNoise
		}
		Orbit			// 木卫轨道偏心率 半长轴变化依据： https://www.aanda.org/articles/aa/full_html/2020/07/aa37445-20/aa37445-20.html
		{
			referenceBody =            Jupiter
			semiMajorAxis =            7.471499901132753E+08			// 6.712443484823595E+08
			eccentricity =             4.543141613980776E-02
			inclination =              2.570839788062522E+01
			meanAnomalyAtEpochD =      2.839017986422953E+02
			longitudeOfAscendingNode = 3.589987323837818E+02
			argumentOfPeriapsis =      5.389131937194293E+01
			color =                    RGB(174,159,141)
		}			
		Properties
		{
			displayName = #ASS_Europa_name//Europa
			description = #ASS_Europa_desc//Records show that this miniature world has lost a considerable amount of water over the past thousands of years. It entered the atmosphere as the temperature rose and was eventually stripped away by the fierce solar wind. This process will continue until the day when the world becomes completely dry. 
			radius = 1387486
			gravParameter = 2.843131383680E+12
			tidallyLocked = True
			isHomeWorld = False
			initialRotation = 0
			albedo = 0.213
			timewarpAltitudeLimits = 520000 520000 520000 520000 520000 520000 520000 520000
			biomeMap = AfterSolarSystem/Textures/PluginData/Europa_Biomes.dds
            Biomes                                                                
			{
				Biome
				{
					name = Lake
					displayName = #ASS_Europa_Biome1
					color = RGB(255,255,255)
					value = 1.7
				}
				Biome
				{
					name = Lowlands
					displayName = #ASS_Europa_Biome2
					color = RGBA(255,150,255,255)
					value = 1.0
				}
				Biome
				{
					name = Craters
					displayName = #ASS_Europa_Biome4
					color = RGB(155,15,200)
					value = 1.2
				}
				Biome
				{
					name = Hightlands
					displayName = #ASS_Europa_Biome5
					color = RGB(155,15,25)
					value = 2.8
				}
				Biome
				{
					name = Hills
					displayName = #ASS_Europa_Biome6
					color = RGB(0,25,40)
					value = 1.0
				}
				Biome
				{
					name = Cilff
					displayName = #ASS_Europa_Biome7
					color = RGB(30,120,40)
					value = 2.5
				}
				Biome
				{
					name = RiverValley
					displayName = #ASS_Europa_Biome8
					color = RGB(130,0,0)
					value = 1.0
				}				
            }
			ScienceValues
			{
				landedDataValue = 8.32
				flyingLowDataValue = 7.92
				flyingHighDataValue = 7.21
				inSpaceLowDataValue = 6.97
				inSpaceHighDataValue = 6.35
				recoveryValue = 7.9
				flyingAltitudeThreshold = 19000
				spaceAltitudeThreshold = 1200000
			}
		}
		ScaledVersion
		{
			type = Atmospheric
		    fadeStart = 90000
			fadeEnd = 91000
			//OnDemand
           // {	
			//	texture = AfterSolarSystem/Textures/PluginData/Europa_Color.dds
			//	normals = AfterSolarSystem/Textures/PluginData/Europa_NRM.dds
			//}
			Material
			{
				color = 1,1,1,1
				texture = AfterSolarSystem/Textures/PluginData/Europa_Color.dds
				normals = AfterSolarSystem/Textures/PluginData/Europa_NRM.dds
				shininess = 0
				specColor = 0.01,0.01,0.01,1
				
				rimPower = 1.31
				rimBlend = 0.24
				rimColorRamp = AfterSolarSystem-Textures/PluginData/GanymedeRimColorRamp.dds				
			}
        }	
		Ocean
		{
			ocean = True
			oceanHeight = 0
			density = 1.0
			oceanColor = 0.49,0.52,0.56,1

			Material
			{
				oceanOpacity = 0.85
				color = 0.49,0.52,0.56,1
				colorFromSpace = 0.117,0.142,0.197,1
				fogColor = 0.918,0.918,1,1
				specColor = 1,1,1,1
				shininess = 0.69
			}
			Fog
			{
				useFog = True
				fogColorStart = 0.117,0.236,0.357,1
				fogColorEnd = 0.0117,0.0236,0.0357,1
			}
		}	
		Atmosphere				
		{				
			enabled =	True			
			oxygen =	True			
			altitude =	520000		// 考虑到游戏性，大气高度只能是这个值			
			adiabaticIndex =	1.33			
			atmosphereMolarMass =	0.01823

				// Water Vape 99.15%
				// CO2        0.75%
				// O2         0.05%
				// SO2		  0.03%
				// N2		  0.02%

			temperatureSeaLevel = 302.07		
			staticPressureASL =	5.301064608	
			pressureCurve				
			{				
				key =	0		5.30106E+00	 0.00000E+00	-2.11099E-04
				key =	14541	2.98101E+00	-1.24812E-04	-1.24812E-04
				key =	29254	1.67634E+00	-7.36973E-05	-7.36973E-05
				key =	44144	9.42677E-01	-4.34476E-05	-4.34476E-05
				key =	59225	5.30106E-01	-2.55675E-05	-2.55675E-05
				key =	74514	2.98101E-01	-1.50143E-05	-1.50143E-05
				key =	90036	1.67634E-01	-8.79620E-06	-8.79620E-06
				key =	105822	9.42677E-02	-5.13976E-06	-5.13976E-06
				key =	121911	5.30106E-02	-2.99454E-06	-2.99454E-06
				key =	138354	2.98101E-02	-1.73919E-06	-1.73919E-06
				key =	155208	1.67634E-02	-1.00667E-06	-1.00667E-06
				key =	172550	9.42677E-03	-5.80124E-07	-5.80124E-07
				key =	190504	5.30106E-03	-3.31858E-07	-3.31858E-07
				key =	209174	2.98101E-03	-1.89738E-07	-1.89738E-07
				key =	228613	1.67634E-03	-1.08412E-07	-1.08412E-07
				key =	248881	9.42677E-04	-6.18974E-08	-6.18974E-08
				key =	270048	5.30106E-04	-3.53091E-08	-3.53091E-08
				key =	292193	2.98101E-04	-2.01217E-08	-2.01217E-08
				key =	315410	1.67634E-04	-1.14539E-08	-1.14539E-08
				key =	339806	9.42677E-05	-6.51173E-09	-6.51173E-09
				key =	365506	5.30106E-05	-3.69688E-09	-3.69688E-09
				key =	392657	2.98101E-05	-2.09564E-09	-2.09564E-09
				key =	421432	1.67634E-05	-1.18600E-09	-1.18600E-09
				key =	452033	9.42677E-06	-6.70021E-10	-6.70021E-10
				key =	484701	5.30106E-06	-3.77814E-10	-3.77814E-10
				key =	520000	0.00000E+00	 0.00000E+00	 0.00000E+00			
			}						
			temperatureCurve				
			{				
				key =	0		266	0.00000E+00	1.05883E-03
				key =	15111	282	1.05883E-03	1.96592E-04
				key =	30371	285	1.96592E-04	-9.08147E-04
				key =	45787	271	-9.08147E-04	-1.02663E-03
				key =	61372	255	-1.02663E-03	-1.07800E-03
				key =	77142	238	-1.07800E-03	-8.76095E-04
				key =	93122	224	-8.76095E-04	-5.54905E-04
				key =	109341	215	-5.54905E-04	-4.24345E-04
				key =	125837	208	-4.24345E-04	-4.16196E-04
				key =	142656	201	-4.16196E-04	-3.48898E-04
				key =	159853	195	-3.48898E-04	-2.83302E-04
				key =	177502	190	-2.83302E-04	-1.64663E-04
				key =	195721	187	-1.64663E-04	-1.58848E-04
				key =	214607	184	-1.58848E-04	-1.53053E-04
				key =	234208	181	-1.53053E-04	-1.47283E-04
				key =	254577	178	-1.47283E-04	-1.41523E-04
				key =	275775	175	-1.41523E-04	-9.05141E-05
				key =	297871	173	-9.05141E-05	-8.66626E-05
				key =	320949	171	-8.66626E-05	-8.28020E-05
				key =	345103	169	-8.28020E-05	-7.89297E-05
				key =	370442	167	-7.89297E-05	-3.75206E-05
				key =	397094	166	-3.75206E-05	-3.55669E-05
				key =	425210	165	-3.55669E-05	-3.36089E-05
				key =	454964	164	-3.36089E-05	0.00000E+00
				key =	486563	164	0.00000E+00	-2.99070E-05
				key =	520000	163	-2.99070E-05	0.00000E+00			
			}				
			temperatureSunMultCurve				
			{				
				key =	0		1.000	0.00000E+00	-5.49269E-05
				key =	15111	0.170	-5.49269E-05	-2.98165E-05
				key =	30371	-0.285	-2.98165E-05	1.94603E-06
				key =	45787	-0.255	1.94603E-06	9.04716E-06
				key =	61372	-0.114	9.04716E-06	1.06531E-05
				key =	77142	0.054	1.06531E-05	7.38423E-06
				key =	93122	0.172	7.38423E-06	8.63185E-07
				key =	109341	0.186	8.63185E-07	0.00000E+00
				key =	125837	0.186	0.00000E+00	0.00000E+00
				key =	142656	0.186	0.00000E+00	0.00000E+00
				key =	159853	0.186	0.00000E+00	0.00000E+00
				key =	177502	0.186	0.00000E+00	0.00000E+00
				key =	195721	0.186	0.00000E+00	0.00000E+00
				key =	214607	0.186	0.00000E+00	0.00000E+00
				key =	234208	0.186	0.00000E+00	0.00000E+00
				key =	254577	0.186	0.00000E+00	0.00000E+00
				key =	275775	0.186	0.00000E+00	0.00000E+00
				key =	297871	0.186	0.00000E+00	0.00000E+00
				key =	320949	0.186	0.00000E+00	0.00000E+00
				key =	345103	0.186	0.00000E+00	0.00000E+00
				key =	370442	0.186	0.00000E+00	0.00000E+00
				key =	397094	0.186	0.00000E+00	0.00000E+00
				key =	425210	0.186	0.00000E+00	0.00000E+00
				key =	454964	0.186	0.00000E+00	0.00000E+00
				key =	486563	0.186	0.00000E+00	0.00000E+00
				key =	520000	0.186	0.00000E+00	0.00000E+00			
			}				
			temperatureLatitudeBiasCurve				
			{				
				key =	0	16.32	0	0
				key =	38	0	-0.8274	-0.8274
				key =	90	-60.68	-1.3439	0
			}				
			temperatureLatitudeSunMultCurve				
			{				
				key =	0	86	0	0
				key =	38	73.07	-0.6555	-0.6555
				key =	90	25	-1.0647	0
			}				
			temperatureAxialSunBiasCurve				
			{				
				key =	0	19.24	0	-0.7012
				key =	25.58989601	0	-0.7775	-0.7775
				key =	115.589896	-44.55	0	0
				key =	205.589896	0	0.7775	0.7775
				key =	295.589896	44.55	0	0
				key =	360	19.24	-0.7012	0
			}				
			temperatureAxialSunMultCurve				
			{				
				key =	0	0	0	0
				key =	38	0.5	0.02	0.02
				key =	90	1	0	0
			}				
			temperatureEccentricityBiasCurve				
			{				
				key =	0	6.4	0	-12.8
				key =	1	-6.4	-12.8	0
			}				
			AtmosphereFromGround // The atmosphere effect that is seen on the horizon
			{
				DEBUG_alwaysUpdateAll = False // Whether all parameters should get recalculated and reapplied every frame.
				doScale = True // Whether the atmosphere mesh should be scaled automatically.
				innerRadius = 1386619 // The lower bound of the atmosphere effect.
				invWaveLength = 1,1.18876433,1.55049169,0.5
				outerRadius = 1422173 // The upper bound of the atmosphere effect.
				samples = 4
				transformScale = 1.02499998,1.02499998,1.02499998 // The scale of the atmosphere mesh in all three directions. Automatically set if doScale is enabled.
				waveLength = 1,0.957692444,0.896153986,0
				outerRadiusMult = 1.025 // A multiplier that automatically sets outerRadius based on the planets radius.
				innerRadiusMult = 0.975 // A multiplier that automatically sets innerRadius based on the planets radius.
			}							
		}				
		PQS
		{
			minLevel = 2
			maxLevel = 12
			fadeEnd = 95000
			fadeStart = 98000
			deactivateAltitude = 100000									
			materialType = AtmosphericTriplanarZoomRotation
			Material
			{
				factor = 8
				factorBlendWidth = 0.01
				factorRotation = 45
				saturation = 0.71
				contrast = 0.75
				tintColor = 1,1,1,0
				specularColor = 0,0,0,1
				albedoBrightness = 1.51

				steepPower = 1
				steepTexStart = 20000
				steepTexEnd = 30000
				steepTex = AfterSolarSystem/Terrain/PluginData/Sand01.dds
				steepTexScale = 1,1
				steepTexOffset = 0,0
				steepBumpMap = AfterSolarSystem/Terrain/PluginData/Sand01_NRM.dds
				steepBumpMapScale = 1,1
				steepBumpMapOffset = 0,0
				steepNearTiling = 2000
				steepTiling = 1000

				lowTexScale = 1,1
				lowTexOffset = 0,0
				lowTiling = 180000

				midTex = AfterSolarSystem/Terrain/PluginData/Sand01.dds
				midTexScale = 1,1
				midTexOffset = 0,0
				midTiling = 225000
				midBumpMap = AfterSolarSystem/Terrain/PluginData/Sand01_NRM.dds
				midBumpMapScale = 1,1
				midBumpMapOffset = 0,0
				midBumpTiling = 225000

				highTexScale = 1,1
				highTexOffset = 0,0
				highTiling = 200000

				lowStart = -1
				lowEnd = -1
				highStart = 2
				highEnd = 2

				globalDensity = 0

				planetOpacity = 0

				oceanFogDistance = 1000
			}
			FallbackMaterial
			{
				saturation = 1
				contrast = 1
				tintColor = 1,1,1,0
				texTiling = 4000
				texPower = 0.75
				multiPower = 0.75
				groundTexStart = 0
				groundTexEnd = 6000
				multiFactor = 24
				mainTex = BUILTIN/RockyGround
				mainTexScale = 1,1
				mainTexOffset = 0,0
				planetOpacity = 1
			}
			Mods
			{
				VertexHeightMap
				{
					map = AfterSolarSystem/Textures/PluginData/Europa_Height.dds
					offset = -1727		// -2385
					deformity = 25720
					scaleDeformityByRadius = false
					order = 9999993
					enabled = true
				}	
				VertexColorMapBlend
				{
					map = AfterSolarSystem/Textures/PluginData/Europa_Color.dds
					blend = 1
					order = 9999993
					enabled = True
					name = _LandClass
				}
				AerialPerspectiveMaterial
				{
					atmosphereDepth = 7000 
					globalDensity = -1E-05 
					heightFalloff = 6.75
				}
				VertexColorSolid
				{
					blend = 1.0
					color = 0.04, 0.04, 0.04, 1.0
					enabled = true
					order = 999999
				}
				VertexSimplexNoiseColor
				{
					seed = 1234
					blend = 0.04
					colorStart = 0.0, 0.0, 0.0, 1.0
					colorEnd = 1.0, 1.0, 1.0, 1.0
					octaves = 8
					persistence = 0.6
					frequency = 4000
					enabled = true
					order = 9999994
				}
			}
		}
	}
}

